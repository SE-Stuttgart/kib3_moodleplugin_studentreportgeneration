{"version":3,"file":"tabs.min.js","sources":["../src/tabs.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * Create a tab navigation to switch between the different reports.\n *\n * @module     mod_srg/tabs\n * @copyright  2024 University of Stuttgart <kasra.habib@iste.uni-stuttgart.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Create a tab navigation to switch between the different reports.\n * Reload '/mod/srg/report_view.php' for each tab and set the active page to 0.\n */\nexport function init() {\n    initTabListeners();\n    initTabVisibilityStates();\n}\n\n/**\n * Initializes click event listeners for tabs in the tab container.\n * When a tab is clicked, the page navigates to a new URL with parameters based on the clicked tab.\n *\n * Assumes there is a container with the ID `#srg-tab-container` in the DOM,\n * and that the tabs within it have the `nav-link` class and a `data-index` attribute.\n */\nfunction initTabListeners() {\n    const tabContainer = document.querySelector('#srg-tab-container');\n\n    const courseModuleId = parseInt(tabContainer.dataset.coursemoduleid, 10);\n\n    // Get all tab links within the container.\n    const tabLinks = tabContainer.querySelectorAll('.nav-link');\n\n    tabLinks.forEach(tab => {\n        // Attach click listener.\n        tab.addEventListener('click', (event) => {\n            event.preventDefault();\n\n            const reportId = tab.dataset.index;\n            const newUrl = new URL('/mod/srg/report_view.php', window.location.origin);\n            newUrl.searchParams.set('id', courseModuleId);\n            newUrl.searchParams.set('report_id', reportId);\n            newUrl.searchParams.set('page_index', 0);\n\n            window.location.href = newUrl.toString();\n        });\n    });\n}\n\n/**\n * Sets the visibility state and accessibility attributes for tabs in the tab container.\n * Highlights the active tab and sets the `aria-selected` attribute based on the current active index.\n *\n * Assumes there is a container with the ID `#srg-tab-container` in the DOM,\n * and that the tabs within it have the `nav-link` class and a `data-index` attribute.\n */\nfunction initTabVisibilityStates() {\n    const tabContainer = document.querySelector('#srg-tab-container');\n\n    const activeTabIndex = parseInt(tabContainer.dataset.activetabindex, 10);\n\n    // Get all tab links within the container.\n    const tabLinks = tabContainer.querySelectorAll('.nav-link');\n\n    tabLinks.forEach(tab => {\n        const tabIndex = parseInt(tab.dataset.index, 10);\n        const isActive = tabIndex === activeTabIndex;\n\n        // Set aria attributes for the active tab.\n        tab.setAttribute('aria-selected', isActive.toString());\n        tab.classList.toggle('srg-tab-active', isActive);\n    });\n\n    // We want to start the container hidden for a more clean appearance.\n    tabContainer.classList.toggle(\"srg-hidden\", false);\n}"],"names":["tabContainer","document","querySelector","courseModuleId","parseInt","dataset","coursemoduleid","querySelectorAll","forEach","tab","addEventListener","event","preventDefault","reportId","index","newUrl","URL","window","location","origin","searchParams","set","href","toString","initTabListeners","activeTabIndex","activetabindex","isActive","setAttribute","classList","toggle","initTabVisibilityStates"],"mappings":";;;;;;;;6BAyCUA,aAAeC,SAASC,cAAc,sBAEtCC,eAAiBC,SAASJ,aAAaK,QAAQC,eAAgB,IAGpDN,aAAaO,iBAAiB,aAEtCC,SAAQC,MAEbA,IAAIC,iBAAiB,SAAUC,QAC3BA,MAAMC,uBAEAC,SAAWJ,IAAIJ,QAAQS,MACvBC,OAAS,IAAIC,IAAI,2BAA4BC,OAAOC,SAASC,QACnEJ,OAAOK,aAAaC,IAAI,KAAMlB,gBAC9BY,OAAOK,aAAaC,IAAI,YAAaR,UACrCE,OAAOK,aAAaC,IAAI,aAAc,GAEtCJ,OAAOC,SAASI,KAAOP,OAAOQ,kBA9BtCC,oBA2CMxB,aAAeC,SAASC,cAAc,sBAEtCuB,eAAiBrB,SAASJ,aAAaK,QAAQqB,eAAgB,IAGpD1B,aAAaO,iBAAiB,aAEtCC,SAAQC,YAEPkB,SADWvB,SAASK,IAAIJ,QAAQS,MAAO,MACfW,eAG9BhB,IAAImB,aAAa,gBAAiBD,SAASJ,YAC3Cd,IAAIoB,UAAUC,OAAO,iBAAkBH,aAI3C3B,aAAa6B,UAAUC,OAAO,cAAc,GA3D5CC"}