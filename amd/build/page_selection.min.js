define("mod_srg/page_selection",["exports","core/templates"],(function(_exports,_templates){function initPaginationListeners(paginationContainerElement){const dataElement=document.querySelector(".srg-page-container"),first=paginationContainerElement.querySelector(".srg-page-nav-first .page-link"),previous=paginationContainerElement.querySelector(".srg-page-nav-previous .page-link"),pages=paginationContainerElement.querySelectorAll(".srg-page-nav-page .page-link"),next=paginationContainerElement.querySelector(".srg-page-nav-next .page-link"),last=paginationContainerElement.querySelector(".srg-page-nav-last .page-link");first.addEventListener("click",(event=>{event.preventDefault();parseInt(dataElement.dataset.activePageIndex,10)>0&&setActivePage(0)})),previous.addEventListener("click",(event=>{event.preventDefault();const activePageIndex=parseInt(dataElement.dataset.activePageIndex,10);activePageIndex>0&&setActivePage(activePageIndex-1)})),pages.forEach(((page,index)=>{page.addEventListener("click",(event=>{event.preventDefault();parseInt(dataElement.dataset.activePageIndex,10)!==index&&setActivePage(index)}))})),next.addEventListener("click",(event=>{event.preventDefault();const activePageIndex=parseInt(dataElement.dataset.activePageIndex,10);activePageIndex<pages.length-1&&setActivePage(activePageIndex+1)})),last.addEventListener("click",(event=>{event.preventDefault();parseInt(dataElement.dataset.activePageIndex,10)<pages.length-1&&setActivePage(pages.length-1)}))}function setActivePage(nextPageIndex){const dataElement=document.querySelector(".srg-page-container"),topPagination=document.querySelector(".srg-page-navigation-container-top"),bottomPagination=document.querySelector(".srg-page-navigation-container-bottom");dataElement.dataset.activePageIndex=nextPageIndex,updatePaginationVisibilityStates(topPagination,nextPageIndex),updatePaginationVisibilityStates(bottomPagination,nextPageIndex);const activeTab=document.querySelectorAll(".srg-tab-container .nav-link")[dataElement.dataset.activeFileIndex],head=JSON.parse(atob(activeTab.getAttribute("data-head")||"W10=")),data=JSON.parse(atob(activeTab.getAttribute("data-content")||"W10="));!function(head,data){const tableContainer=document.querySelector(".srg-tab-content-container"),templateContext={head:head,rows:data};(0,_templates.render)("mod_srg/table",templateContext).then((html=>{tableContainer.innerHTML=html})).catch((ex=>{window.console.error("Template rendering failed: ",ex)}))}(function(head){return head.map((headValue=>({value:makeHtmlSafe(headValue)})))}(head),function(data,pageLength,pageIndex){const startIndex=pageIndex*pageLength,endIndex=startIndex+pageLength;return data.slice(startIndex,endIndex).map((row=>({columns:row.map((cellValue=>({value:makeHtmlSafe(cellValue)})))})))}(data,parseInt(dataElement.dataset.pageLength,10),parseInt(dataElement.dataset.activePageIndex,10)))}function updatePaginationVisibilityStates(paginationContainerElement,pageIndex){const first=paginationContainerElement.querySelector(".srg-page-nav-first"),previous=paginationContainerElement.querySelector(".srg-page-nav-previous"),leftEllipsis=paginationContainerElement.querySelector(".srg-page-nav-ellipsis-left"),pages=paginationContainerElement.querySelectorAll(".srg-page-nav-page"),rightEllipsis=paginationContainerElement.querySelector(".srg-page-nav-ellipsis-right"),next=paginationContainerElement.querySelector(".srg-page-nav-next"),last=paginationContainerElement.querySelector(".srg-page-nav-last"),isFirst=0===pageIndex,isLast=pageIndex===pages.length-1,isFirstHidden=pageIndex-5>0,isLastHidden=pageIndex+5<pages.length-1;first.classList.toggle("disabled",isFirst),previous.classList.toggle("disabled",isFirst),leftEllipsis.classList.toggle("srg-hidden",!isFirstHidden),rightEllipsis.classList.toggle("srg-hidden",!isLastHidden),next.classList.toggle("disabled",isLast),last.classList.toggle("disabled",isLast),pages.forEach(((page,index)=>{const isActive=index===pageIndex;page.classList.toggle("active",isActive),page.setAttribute("aria-selected",isActive?"true":"false");const isHidden=Math.abs(pageIndex-index)>5;page.classList.toggle("srg-hidden",isHidden)}))}function makeHtmlSafe(value){const tempDiv=document.createElement("div");return tempDiv.textContent=String(value),tempDiv.innerHTML}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initPageSelection=
/**
   * Create and support the data viewing in html.
   *
   * @module     mod_srg/page_selection
   * @copyright  2024 University of Stuttgart <kasra.habib@iste.uni-stuttgart.de>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
function(pages){const topPagination=document.querySelector(".srg-page-navigation-container-top"),bottomPagination=document.querySelector(".srg-page-navigation-container-bottom"),templateContext={pages:pages};(0,_templates.render)("mod_srg/pagination",templateContext).then((html=>{topPagination.innerHTML=html,bottomPagination.innerHTML=html,initPaginationListeners(topPagination),initPaginationListeners(bottomPagination),setActivePage(0)})).catch((ex=>{window.console.error("Template rendering failed: ",ex)}))}}));

//# sourceMappingURL=page_selection.min.js.map